function stopInitialScrollEvent(event){event.preventDefault(),event.stopImmediatePropagation(),event.stopPropagation(),window.scrollTo(0,0)}window.addEventListener("scroll",stopInitialScrollEvent),window.addEventListener("load",function(event){window.removeEventListener("scroll",stopInitialScrollEvent)});function toggleFAB(){var fabContainer=document.querySelector(".fab-message"),fabButton=fabContainer.querySelector(".fab-message-button a");fabContainer.classList.toggle("is-open"),fabButton.classList.toggle("toggle-icon")}$(document).ready(function(){var fabContainer=document.querySelector(".fab-message"),messages=document.querySelector(".fab-message-content h3");messages&&(fabContainer.style.display="initial")});function switchTheme(e){var d1=document.getElementById("app-theme");e.target.checked?(d1.href="/theme/css/beacon-light.min.css",document.documentElement.setAttribute("data-theme","light"),localStorage.setItem("theme","light")):(d1.href="/theme/css/beacon-dark.min.css",document.documentElement.setAttribute("data-theme","dark"),localStorage.setItem("theme","dark"))}$("#toggleSwitch").on("change",switchTheme);function hideInfoBanner(msg){localStorage.setItem("infoBannerStatus",msg),$("#infoBanner").attr("class","d-none")}function setValidatorEffectiveness(elem,eff){if(elem===void 0)return;eff=parseInt(eff),eff>=100?$("#"+elem).html(`<span class="text-success"> ${eff}% - Perfect <i class="fas fa-grin-stars"></i>`):eff>80?$("#"+elem).html(`<span class="text-success"> ${eff}% - Good <i class="fas fa-smile"></i></span>`):eff>60?$("#"+elem).html(`<span class="text-warning"> ${eff}% - Fair <i class="fas fa-meh"></i></span>`):$("#"+elem).html(`<span class="text-danger"> ${eff}% - Bad <i class="fas fa-frown"></i></span>`)}function setUtc(){if($("#optionLocal").is(":checked")||$("#optionTs").is(":checked")){var unixTs=$("#unixTs").text(),ts=luxon.DateTime.fromMillis(unixTs*1e3);$("#timestamp").text(ts.toUTC().toFormat("MMM-dd-yyyy hh:mm:ss a"))}}function setLocal(){if($("#optionUtc").is(":checked")||$("#optionTs").is(":checked")){var unixTs=$("#unixTs").text(),ts=luxon.DateTime.fromMillis(unixTs*1e3);$("#timestamp").text(ts.toFormat("MMM-dd-yyyy HH:mm:ss")+" UTC"+ts.toFormat("Z"))}}function setTs(){var unixTs=$("#unixTs").text(),utc=luxon.DateTime.fromMillis(unixTs*1e3);$("#timestamp").text(utc.ts/1e3)}function copyTs(){var text=$("#timestamp").text();tsArr=text.split(" "),tsArr.length>1?navigator.clipboard.writeText(tsArr[0]+" "+tsArr[1]):navigator.clipboard.writeText(tsArr[0])}function viewHexDataAs(id,type){var extraDataHex=$(`#${id}`).attr("aria-hex-data");if(!extraDataHex)return;if(type==="hex")$(`#${id}`).text(extraDataHex);else try{var r=decodeURIComponent(extraDataHex.replace(/\s+/g,"").replace(/[0-9a-f]{2}/g,"%$&"));$(`#${id}`).text(r.replace("0x",""))}catch(e){$(`#${id}`).text(hex2a(extraDataHex.replace("0x","")))}}function hex2a(hexx){for(var hex=hexx.toString(),str="",i=0;i<hex.length;i+=2)str+=String.fromCharCode(parseInt(hex.substr(i,2),16));return str}$(document).ready(function(){formatTimestamps(),$('[data-toggle="tooltip"]').tooltip&&$('[data-toggle="tooltip"]').tooltip();let requestNum=8;var bhValidators=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(obj){return obj.pubkey},remote:{url:"/search/validators/%QUERY",wildcard:"%QUERY",maxPendingRequests:requestNum}}),bhSlots=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(obj){return obj.slot},remote:{url:"/search/slots/%QUERY",wildcard:"%QUERY",maxPendingRequests:requestNum}}),bhBlocks=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(obj){return obj.block},remote:{url:"/search/blocks/%QUERY",wildcard:"%QUERY",maxPendingRequests:requestNum}}),bhTransactions=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(obj){return obj.txhash},remote:{url:"/search/transactions/%QUERY",wildcard:"%QUERY",maxPendingRequests:requestNum}}),bhGraffiti=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(obj){return obj.graffiti},remote:{url:"/search/graffiti/%QUERY",wildcard:"%QUERY",maxPendingRequests:requestNum}}),bhEpochs=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(obj){return obj.epoch},remote:{url:"/search/epochs/%QUERY",wildcard:"%QUERY",maxPendingRequests:requestNum}}),bhEth1Accounts=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(obj){return obj.account},remote:{url:"/search/eth1_addresses/%QUERY",wildcard:"%QUERY",maxPendingRequests:requestNum}}),bhValidatorsByAddress=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.whitespace,queryTokenizer:Bloodhound.tokenizers.whitespace,identify:function(obj){return obj.eth1_address},remote:{url:"/search/count_indexed_validators_by_eth1_address/%QUERY",wildcard:"%QUERY",maxPendingRequests:requestNum}});$(".typeahead").typeahead({minLength:1,highlight:!0,hint:!1,autoselect:!1},{limit:5,name:"validators",source:bhValidators,display:"pubkey",templates:{header:'<h3 class="h5">Validators</h3>',suggestion:function(data){return`<div class="text-monospace text-truncate">${data.index}: ${data.pubkey}</div>`}}},{limit:5,name:"blocks",source:bhBlocks,display:"hash",templates:{header:'<h3 class="h5">Blocks</h3>',suggestion:function(data){return`<div class="text-monospace text-truncate">${data.block}: ${data.hash}</div>`}}},{limit:5,name:"slots",source:bhSlots,display:"blockroot",templates:{header:'<h3 class="h5">Slots</h3>',suggestion:function(data){return`<div class="text-monospace text-truncate">${data.slot}: 0x${data.blockroot}</div>`}}},{limit:5,name:"transactions",source:bhTransactions,display:"txhash",templates:{header:'<h3 class="h5">Transactions</h3>',suggestion:function(data){return`<div class="text-monospace text-truncate">0x${data.txhash}</div>`}}},{limit:5,name:"epochs",source:bhEpochs,display:"epoch",templates:{header:'<h3 class="h5">Epochs</h3>',suggestion:function(data){return`<div>${data.epoch}</div>`}}},{limit:5,name:"addresses",source:bhEth1Accounts,display:"address",templates:{header:'<h3 class="h5">Address</h3>',suggestion:function(data){return`<div class="text-monospace text-truncate">0x${data.address}</div>`}}},{limit:5,name:"validators-by-address",source:bhValidatorsByAddress,display:"eth1_address",templates:{header:'<h3 class="h5">Validators by Address</h3>',suggestion:function(data){return`<div class="text-monospace text-truncate">${data.count}: 0x${data.eth1_address}</div>`}}},{limit:5,name:"graffiti",source:bhGraffiti,display:"graffiti",templates:{header:'<h3 class="h5">Blocks by Graffiti</h3>',suggestion:function(data){return`<div class="text-monospace" style="display:flex"><div class="text-truncate" style="flex:1 1 auto;">${data.graffiti}</div><div style="max-width:fit-content;white-space:nowrap;">${data.count}</div></div>`}}}),$(".typeahead").on("focus",function(event){event.target.value!==""&&$(this).trigger($.Event("keydown",{keyCode:40}))}),$(".typeahead").on("input",function(input){$(".tt-suggestion").first().addClass("tt-cursor")}),$(".tt-menu").on("mouseenter",function(){$(".tt-suggestion").first().removeClass("tt-cursor")}),$(".tt-menu").on("mouseleave",function(){$(".tt-suggestion").first().addClass("tt-cursor")}),$(".typeahead").on("typeahead:select",function(ev,sug){if(sug.txhash!==void 0)window.location="/tx/"+sug.txhash;else if(sug.block!==void 0)window.location="/block/"+sug.block;else if(sug.slot!==void 0)window.location="/slot/"+sug.slot;else if(sug.index!==void 0)sug.index==="deposited"?window.location="/validator/"+sug.pubkey:window.location="/validator/"+sug.index;else if(sug.epoch!==void 0)window.location="/epoch/"+sug.epoch;else if(sug.address!==void 0)window.location="/address/"+sug.address;else if(sug.eth1_address!==void 0)window.location="/validators/initiated-deposits?q="+sug.eth1_address;else if(sug.graffiti!==void 0){var el=document.createElement("textarea");el.innerHTML=sug.graffiti,window.location="/slots?q="+encodeURIComponent(el.value)}else console.log("invalid typeahead-selection",sug)})}),$("[aria-ethereum-date]").each(function(){formatAriaEthereumDate(this)}),$("[aria-ethereum-duration]").each(function(){formatAriaEthereumDuration(this)}),$(document).ready(function(){var clipboard=new ClipboardJS("[data-clipboard-text]");clipboard.on("success",function(e){var title=$(e.trigger).attr("data-original-title");$(e.trigger).tooltip("hide").attr("data-original-title","Copied!").tooltip("show"),setTimeout(function(){$(e.trigger).tooltip("hide").attr("data-original-title",title)},1e3)}),clipboard.on("error",function(e){var title=$(e.trigger).attr("data-original-title");$(e.trigger).tooltip("hide").attr("data-original-title","Failed to Copy!").tooltip("show"),setTimeout(function(){$(e.trigger).tooltip("hide").attr("data-original-title",title)},1e3)})}),$(".nav-tabs a").on("shown.bs.tab",function(e){history.replaceState?history.pushState(null,null,e.target.hash):window.location.hash=e.target.hash}),$(".nav-pills a").on("shown.bs.tab",function(e){history.replaceState?history.pushState(null,null,e.target.hash):window.location.hash=e.target.hash});var url=document.location.toString();url.match("#")&&($('.nav-tabs a[href="#'+url.split("#")[1]+'"]').tab("show"),$('.nav-pills a[href="#'+url.split("#")[1]+'"]').tab("show"));function formatAriaEthereumDate(elem){var dt=$(elem).attr("aria-ethereum-date"),format=$(elem).attr("aria-ethereum-date-format");if(format||(format="ff"),format==="FROMNOW")$(elem).text(getRelativeTime(luxon.DateTime.fromMillis(dt*1e3))),$(elem).attr("title",luxon.DateTime.fromMillis(dt*1e3).toFormat("ff")),$(elem).attr("data-toggle","tooltip");else if(format==="LOCAL"){var local=luxon.DateTime.fromMillis(dt*1e3);$(elem).text(local.toFormat("MMM-dd-yyyy HH:mm:ss")+" UTC"+local.toFormat("Z")),$(elem).attr("title",luxon.DateTime.fromMillis(dt*1e3).toFormat("ff")),$(elem).attr("data-toggle","tooltip")}else $(elem).text(luxon.DateTime.fromMillis(dt*1e3).toFormat(format))}function formatTimestamps(selStr){var sel=$(document);selStr!==void 0&&(sel=$(selStr)),sel.find(".timestamp").each(function(){var ts=$(this).data("timestamp"),tsLuxon=luxon.DateTime.fromMillis(ts*1e3);$(this).attr("data-original-title",tsLuxon.toFormat("ff")),$(this).text(getRelativeTime(tsLuxon))}),sel.find('[data-toggle="tooltip"]').tooltip&&sel.find('[data-toggle="tooltip"]').tooltip()}function getLuxonDateFromTimestamp(ts){if(!ts)return;if(`${ts}`.includes("T"))return ts==="0001-01-01T00:00:00Z"?void 0:luxon.DateTime.fromISO(ts);{let parsedDate=parseInt(ts);return parsedDate===0||isNaN(parsedDate)?void 0:luxon.DateTime.fromMillis(parsedDate*1e3)}}function getRelativeTime(tsLuxon){if(!tsLuxon)return;var prefix="",suffix="";if(tsLuxon.diffNow().milliseconds>0)prefix="in ";else{var now=luxon.DateTime.utc();tsLuxon=luxon.DateTime.fromSeconds(now.ts/1e3-tsLuxon.diffNow().milliseconds/1e3),suffix=" ago"}var duration=tsLuxon.diffNow(["days","hours","minutes","seconds"]);const formattedDuration=formatLuxonDuration(duration);return`${prefix}${formattedDuration}${suffix}`}function formatAriaEthereumDuration(elem){const attr=$(elem).attr("aria-ethereum-duration"),duration=luxon.Duration.fromMillis(attr).shiftTo("days","hours","minutes","seconds");$(elem).text(formatLuxonDuration(duration))}function formatLuxonDuration(duration){var daysPart=Math.round(duration.days),hoursPart=Math.round(duration.hours),minutesPart=Math.round(duration.minutes),secondsPart=Math.round(duration.seconds);if(daysPart===0&&hoursPart===0&&minutesPart===0&&secondsPart===0)return"0 secs";var sDays=daysPart===1?"":"s",sHours=hoursPart===1?"":"s",sMinutes=minutesPart===1?"":"s",sSeconds=secondsPart===1?"":"s",parts=[];return daysPart!==0&&parts.push(`${daysPart} day${sDays}`),hoursPart!==0&&parts.push(`${hoursPart} hr${sHours}`),minutesPart!==0&&parts.push(`${minutesPart} min${sMinutes}`),secondsPart!==0&&parts.length==0&&parts.push(`${secondsPart} sec${sSeconds}`),parts.length===1?`${parts[0]}`:parts.length>1?`${parts[0]} ${parts[1]}`:`${duration.days}days  ${duration.hours}hrs ${duration.minutes}mins ${duration.seconds}secs`}function addCommas(number){return number.toString().replace(/,/g,"").replace(/\B(?=(\d{3})+(?!\d))/g,"<span class='thousands-separator'></span>")}function getIncomeChartValueString(value,currency,ethPrice){return this.currency==="ETH"?`${value.toFixed(5)} ETH`:`${(value/ethPrice).toFixed(5)} ETH (${value.toFixed(2)} ${currency})`}$("[data-tooltip-date=true]").each(function(item){let titleObject=$($.parseHTML($(this).attr("title")));titleObject.find("[aria-ethereum-date]").each(function(){formatAriaEthereumDate(this)}),titleObject.find("[aria-ethereum-duration]").each(function(){formatAriaEthereumDuration(this)}),$(this).attr("title",titleObject.prop("outerHTML"))});
